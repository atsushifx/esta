---
title: トラブルシューティング
description: テスト実行時に発生するエラーや予期しないスキップの原因を解説します。
sidebar_position: 7
---

## 7. トラブルシューティング

この章では、E2E Fixture Framework を使ってテストを実行する際に起こりうる代表的なエラーや、スキップされる原因、その解決策を紹介します。

---

### 🚫 テストがスキップされる

**問題**：特定のテストケースが無視されて実行されない

**原因と対処法**：

| 原因                                              | 対処法                                                   |
| ------------------------------------------------- | -------------------------------------------------------- |
| ディレクトリまたはファイル名が `#` で始まっている | 名前を変更してください（例：`#draft` → `draft`）         |
| `output.json` が存在しない                        | 出力比較ができないため、`output.json` を追加してください |
| `input.md` / `input.txt` が存在しない             | パーサが入力を読み取れません。ファイルを確認してください |
| テストスキャナの対象範囲に含まれていない          | `AgE2eScan*()` 関数に渡すパスを再確認してください        |

---

### ❗ 差分エラー（出力が一致しない）

**問題**：実行結果が `output.json` と一致せず、テストが失敗する

**対応方法**：

- まず `expected` の形式を再確認しましょう（パーサ仕様と一致しているか）
- 差分表示で `expected` / `received` の構造差が確認できます
- フォーマッタや整形ツールを使って両者を比較すると可視化しやすくなります

---

### ❓ JSONエラーが発生する

**問題**：`output.json` の読み取り時にエラーが出る

**よくある原因**：

- カンマのつけ忘れ、引用符の閉じ忘れなどの構文ミス
- ファイルのエンコーディングが UTF-8 でない

**対処法**：

- JSONリントツール（[jsonlint.com](https://jsonlint.com) など）で事前チェック
- エディタで保存形式を UTF-8 に統一

---

### 🛠 その他のヒント

- `console.log()` でパーサの出力を直接確認すると、差異が見つけやすくなります
- テストランナーの `--run` や `--only` オプションで、問題のケースだけを切り出してデバッグすると効率的です

---

本章で解決しない問題がある場合は、Issueの提出または開発者への相談をご検討ください。
